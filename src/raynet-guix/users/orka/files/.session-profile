# ~/.profile: sourced by the hardware/display manager and login shells

# --- Profile Sourcing ---

# Source default user profile
GUIX_PROFILE_DEFAULT="$HOME/.guix-profile"
if [ -f "$GUIX_PROFILE_DEFAULT/etc/profile" ]; then
  . "$GUIX_PROFILE_DEFAULT/etc/profile"
fi

# Source system environment profile
GUIX_PROFILE_SYSTEM="/home/orka/guix-system/env/profile"
if [ -d "$GUIX_PROFILE_SYSTEM" ]; then
  . "$GUIX_PROFILE_SYSTEM/etc/profile"
fi

# Source extra user profile
export GUIX_PROFILE_EXTRA="$HOME/.guix-profiles/orka-extra"
if [ -f "$GUIX_PROFILE_EXTRA/etc/profile" ]; then
  . "$GUIX_PROFILE_EXTRA/etc/profile"
fi

# Source Guix Home profile
if [ -f "$HOME/.guix-home/profile/etc/profile" ]; then
  . "$HOME/.guix-home/profile/etc/profile"
fi

# Nix profile
if [ -e "$HOME/.nix-profile/etc/profile.d/nix.sh" ]; then
  . "$HOME/.nix-profile/etc/profile.d/nix.sh"
fi

# --- Environment Variables ---

# PATH
export PATH="$PATH:$HOME/.npm-global/bin:$HOME/.local/bin:$HOME/.cargo/bin:$HOME/.npm-packages/bin:$HOME/.config/emacs/bin/:$HOME/.nix-profile/bin"

# XDG Data Dirs for Flatpak and local apps
export XDG_DATA_DIRS="$HOME/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:$HOME/.local/share:$XDG_DATA_DIRS"

# LD_LIBRARY_PATH
# export LD_LIBRARY_PATH="$HOME/.guix-home/profile/lib:$HOME/guix-system/env/profile/lib:$HOME/.guix-profile/lib:$HOME/.guix-profiles/orka-extra/lib:$LD_LIBRARY_PATH"

# Input Method and other environment variables
export XMODIFIERS="@im=fcitx"
export GLFW_IM_MODULE="fcitx"
export BROWSER="google-chrome"
export EDITOR="helix"
export VISUAL="helix"
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"
